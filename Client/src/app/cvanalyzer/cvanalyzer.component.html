<div class="panel-header panel-header-sm">
</div>
<div class="main-content">
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header">
        </div>
        <div class="card-body">


          <!--btn to upload Cv-->



          <div class="design-card">
            <div class="design-title">Upload Your Resume in order to unlock/refresh this section </div>
            <div class="file-input-container-1">
              <input type="file" class="file-input-1" accept="application/pdf" (change)="onFileSelected($event)">
              <label class="file-input-label-1">
                <i class="fas fa-cloud-upload-alt file-icon-1"></i>
                <div style="font-weight: 600; margin-bottom: 0.5rem;">Drop your PDF here</div>
                <div style="color: #6c757d; font-size: 0.9rem;">or click to browse</div>
              </label>
            </div>
            <div id="status-1" class="status-message"></div>
          </div>


          <hr>

          <div *ngIf="isLoading" class="spinner-container">
            <mat-progress-spinner mode="indeterminate" class="custom-spinner"></mat-progress-spinner>
          </div>

          <div *ngIf="Resume" class="resume-container">
            <!-- Floating Background Elements -->
            <div class="floating-elements">
              <div class="floating-element">
                <i class="fas fa-code"></i>
              </div>
              <div class="floating-element">
                <i class="fas fa-cloud"></i>
              </div>
              <div class="floating-element">
                <i class="fas fa-database"></i>
              </div>
            </div>

            <!-- Header Section -->
            <div class="header">
              <h1 class="main-title">Professional Profile Analysis</h1>
              <p class="subtitle">{{ Resume.summary.substring(0, 120) }}...</p>
              <div class="profile-badges">
                <div class="profile-badge">
                  <div class="status-dot"></div>
                  <span>{{ Resume.field }} â€¢ {{ Resume.experienceLevel }}</span>
                </div>
              </div>
            </div>

            <!-- Navigation Tabs -->
            <div class="tabs-container">
              <div class="tabs">
                <div class="tab" [class.active]="activeTab === 'overview'" (click)="setActiveTab('overview')">
                  <i class="fas fa-user"></i>
                  <span>Overview</span>
                </div>
                <div class="tab" [class.active]="activeTab === 'strengths'" (click)="setActiveTab('strengths')">
                  <i class="fas fa-star"></i>
                  <span>Strengths</span>
                </div>
                <div class="tab" [class.active]="activeTab === 'weaknesses'" (click)="setActiveTab('weaknesses')">
                  <i class="fas fa-exclamation-triangle"></i>
                  <span>Areas to Improve</span>
                </div>
                <div class="tab" [class.active]="activeTab === 'skills'" (click)="setActiveTab('skills')">
                  <i class="fas fa-cogs"></i>
                  <span>Skills</span>
                </div>
                <!-- finish later-->
                <div *ngIf="hasFeedback" class="tab" [class.active]="activeTab === 'recommandation'"
                  (click)="setActiveTab('recommandation')">
                  <i class="fas fa-cogs"></i>
                  <span>Suitable Offer</span>
                </div>

              </div>
            </div>

            <!-- Overview Content -->
            <div class="content-area" *ngIf="activeTab === 'overview'">
              <div class="overview-grid">
                <!-- Summary Card -->
                <div class="info-card summary-card">
                  <div class="card-header">
                    <div class="card-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                      <i class="fas fa-user-circle"></i>
                    </div>
                    <h3>Professional Summary</h3>
                  </div>
                  <p class="card-content">{{ Resume.summary }}</p>
                </div>

                <!-- Education Card -->
                <div class="info-card education-card">
                  <div class="card-header">
                    <div class="card-icon" style="background: linear-gradient(135deg, #f093fb, #f5576c);">
                      <i class="fas fa-graduation-cap"></i>
                    </div>
                    <h3>Education</h3>
                  </div>
                  <p class="card-content">{{ Resume.education }}</p>
                </div>

                <!-- Languages Card -->
                <div class="info-card languages-card">
                  <div class="card-header">
                    <div class="card-icon" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
                      <i class="fas fa-globe"></i>
                    </div>
                    <h3>Languages</h3>
                  </div>
                  <div class="languages-list">
                    <span class="language-tag" *ngFor="let language of Resume.languages">
                      {{ language }}
                    </span>
                  </div>
                </div>

                <!-- Certifications Card -->
                <div class="info-card certifications-card">
                  <div class="card-header">
                    <div class="card-icon" style="background: linear-gradient(135deg, #fa709a, #fee140);">
                      <i class="fas fa-certificate"></i>
                    </div>
                    <h3>Certifications</h3>
                  </div>
                  <div class="certifications-list">
                    <div class="cert-item" *ngFor="let cert of Resume.certifications">
                      <i class="fas fa-award"></i>
                      <span>{{ cert }}</span>
                    </div>
                    <div class="cert-item no-certs" *ngIf="Resume.certifications.length === 0">
                      <i class="fas fa-info-circle"></i>
                      <span>No certifications mentioned</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Strengths Content -->
            <div class="content-area" *ngIf="activeTab === 'strengths'">
              <div class="strengths-grid">
                <div class="strength-card" *ngFor="let strength of Resume.strengths; let i = index">
                  <div class="strength-icon" [style.background]="getStrengthGradient(i)">
                    <i [class]="getStrengthIcon(strength)"></i>
                  </div>
                  <div class="strength-content">
                    <div class="strength-checkmark">
                      <i class="fas fa-check-circle"></i>
                    </div>
                    <p class="strength-text">{{ strength }}</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Weaknesses Content -->
            <div class="content-area" *ngIf="activeTab === 'weaknesses'">
              <div class="weaknesses-section">
                <div class="weakness-card" *ngFor="let weakness of Resume.weaknesses">
                  <div class="weakness-header">
                    <div class="weakness-icon">
                      <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h3>Area for Growth</h3>
                  </div>
                  <div class="weakness-content">
                    <p>{{ weakness }}</p>
                  </div>
                </div>

                <!-- Recommendations -->
                <div class="recommendations-card">
                  <div class="recommendations-header">
                    <div class="recommendations-icon">
                      <i class="fas fa-lightbulb"></i>
                    </div>
                    <h3>Professional Recommendations</h3>
                  </div>
                  <div class="recommendations-content">
                    <p>{{ Resume.recommendations }}</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Skills Content -->
            <div class="content-area" *ngIf="activeTab === 'skills'">
              <div class="skills-sections">
                <!-- Technical Skills -->
                <div class="skills-category">
                  <div class="skills-header">
                    <div class="skills-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                      <i class="fas fa-code"></i>
                    </div>
                    <h3>Technical Skills</h3>
                    <span class="skills-count">{{ Resume.technicalSkills.length }}</span>
                  </div>
                  <div class="skills-grid">
                    <div class="skill-tag technical" *ngFor="let skill of Resume.technicalSkills">
                      {{ skill }}
                    </div>
                  </div>
                </div>

                <!-- Soft Skills -->
                <div class="skills-category">
                  <div class="skills-header">
                    <div class="skills-icon" style="background: linear-gradient(135deg, #ffecd2, #fcb69f);">
                      <i class="fas fa-users"></i>
                    </div>
                    <h3>Soft Skills</h3>
                    <span class="skills-count">{{ Resume.softSkills.length }}</span>
                  </div>
                  <div class="skills-grid">
                    <div class="skill-tag soft" *ngFor="let skill of Resume.softSkills">
                      {{ skill }}
                    </div>
                  </div>
                </div>
              </div>
            </div>



            <!-- Suitable Offers Content              MISSING DATA AND SCORE -->
            <div class="content-area" *ngIf="activeTab === 'recommandation' ">
              <div class="recommendations-container">
                <div class="card-grid">
                  <div class="recommendation-card" *ngFor="let offer of my_saved_offers">
                    <!-- Only show if feedback/score exist -->
                    <div class="card" *ngIf="offer.matchScore !== undefined && offer.feedback">
                      <div class="card-header">
                        <h3 class="card-title">{{ offer.title }}</h3>
                        <div class="match-badge" [ngClass]="{
              'badge-success': offer.isStrongMatch,
              'badge-warning': !offer.isStrongMatch
            }">
                          {{ offer.isStrongMatch ? 'Strong Match' : 'Weak Match' }}
                        </div>
                      </div>

                      <div class="card-body">
                        <div class="score-section">
                          <div class="score-circle" [ngClass]="{
                'score-high': offer.matchScore >= 80,
                'score-medium': offer.matchScore >= 60 && offer.matchScore < 80,
                'score-low': offer.matchScore < 60
              }">
                            <span class="score-value">{{ offer.matchScore }}%</span>
                            <span class="score-label">Match</span>
                          </div>
                        </div>

                        <div class="feedback-section">
                          <h4 class="feedback-title">Feedback</h4>
                          <p class="feedback-text">{{ offer.feedback }}</p>
                        </div>
                      </div>

                      <!--
                      <div class="card-footer">
                        <button class="btn btn-primary">View Details</button>
                        <button class="btn btn-outline">Save</button>
                      </div>
                      -->
                    </div>
                  </div>
                </div>
              </div>
            </div>







          </div>

          <div style="height: 20px;"></div>
          <hr>
          <div style="height: 20px;"></div>

          <div *ngIf="Resume && !hasFeedback" class="design-card">
            <div class="design-title">Get suitable offers feedback .</div>
            <button class="file-input-button-2" (click)="runMatching()">
              <i class="fas fa-plus"></i>
              <span>Review Saved Offers</span>
            </button>
            <div id="status-2" class="status-message"></div>
          </div>


          <div *ngIf="Resume" class="design-card">
            <div class="design-title">Clear Resume Data .</div>
            <button class="file-input-button-2" (click)="DeleteResume()">
              <i class="fas fa-trash"></i>
              <span>Delete Resume</span>
            </button>
            <div id="status-2" class="status-message"></div>
          </div>



        </div>
      </div>
    </div>
    <!-- CV PREVIEW -- NOT SHOWING FOR PHONE
    <div class="col-md-4">
      <div class="card card-user">
        <iframe *ngIf="pdfSrc" [src]="pdfSrc" width="100%" height="1000px"></iframe>
      </div>
    </div>
    -->
  </div>
</div>



<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Inter', 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 50%, #dc3545 100%);
    min-height: 100vh;
    padding: 2rem;
    color: #212529;
  }

  .container {
    max-width: 1000px;
    margin: 0 auto;
  }

  h1 {
    text-align: center;
    margin-bottom: 3rem;
    font-size: 2.5rem;
    background: linear-gradient(135deg, #dc3545 0%, #a71e2a 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .design-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 2rem;
    margin-bottom: 2rem;
  }

  .design-card {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    border-radius: 1.5rem;
    padding: 2rem;
    border: 1px solid rgba(220, 53, 69, 0.2);
    box-shadow: 0 4px 16px rgba(220, 53, 69, 0.1);
  }

  .design-title {
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: #dc3545;
  }

  /* Design 1: Modern Drag & Drop */
  .file-input-container-1 {
    position: relative;
    width: 100%;
  }

  .file-input-1 {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
    z-index: 2;
  }

  .file-input-label-1 {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 150px;
    border: 2px dashed #dc3545;
    border-radius: 1rem;
    background: rgba(220, 53, 69, 0.05);
    transition: all 0.3s ease;
    cursor: pointer;
    position: relative;
    overflow: hidden;
  }

  .file-input-label-1:hover {
    background: rgba(220, 53, 69, 0.1);
    border-color: #a71e2a;
    transform: scale(1.02);
  }

  .file-input-label-1::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(220, 53, 69, 0.2), transparent);
    transition: left 0.5s;
  }

  .file-input-container-1:hover .file-input-label-1::before {
    left: 100%;
  }

  .file-icon-1 {
    font-size: 3rem;
    color: #dc3545;
    margin-bottom: 1rem;
    animation: bounce 2s infinite;
  }

  @keyframes bounce {

    0%,
    20%,
    53%,
    80%,
    100% {
      transform: translateY(0);
    }

    40%,
    43% {
      transform: translateY(-10px);
    }

    70% {
      transform: translateY(-5px);
    }
  }

  /* Design 2: Button Style */
  .file-input-container-2 {
    position: relative;
  }

  .file-input-2 {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
  }

  .file-input-button-2 {
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    background: linear-gradient(135deg, #dc3545 0%, #a71e2a 100%);
    color: white;
    padding: 1rem 2rem;
    border-radius: 2rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    border: none;
    box-shadow: 0 4px 16px rgba(220, 53, 69, 0.3);
    position: relative;
    overflow: hidden;
  }

  .file-input-button-2:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 32px rgba(220, 53, 69, 0.4);
  }

  .file-input-button-2::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s;
  }

  .file-input-button-2:hover::before {
    left: 100%;
  }

  /* Design 3: Card Style */
  .file-input-container-3 {
    position: relative;
  }

  .file-input-3 {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
  }

  .file-input-card-3 {
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(220, 53, 69, 0.3);
    border-radius: 1rem;
    padding: 1.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .file-input-card-3:hover {
    border-color: #dc3545;
    box-shadow: 0 8px 32px rgba(220, 53, 69, 0.2);
    transform: translateY(-2px);
  }

  .file-icon-3 {
    width: 3rem;
    height: 3rem;
    background: linear-gradient(135deg, #dc3545 0%, #a71e2a 100%);
    border-radius: 0.75rem;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
  }

  .file-text-3 {
    flex: 1;
  }

  .file-title-3 {
    font-weight: 600;
    color: #dc3545;
    margin-bottom: 0.25rem;
  }

  .file-subtitle-3 {
    font-size: 0.9rem;
    color: #6c757d;
  }

  /* Design 4: Minimal Style */
  .file-input-container-4 {
    position: relative;
  }

  .file-input-4 {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
  }

  .file-input-minimal-4 {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    border: 1px solid rgba(220, 53, 69, 0.3);
    border-radius: 0.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.8);
  }

  .file-input-minimal-4:hover {
    border-color: #dc3545;
    background: rgba(220, 53, 69, 0.05);
  }

  .file-icon-4 {
    color: #dc3545;
    font-size: 1.25rem;
  }

  .file-text-4 {
    color: #495057;
    font-weight: 500;
  }

  /* Design 5: Advanced with Preview */
  .file-input-container-5 {
    position: relative;
  }

  .file-input-5 {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
    z-index: 2;
  }

  .file-input-advanced-5 {
    border: 2px solid rgba(220, 53, 69, 0.3);
    border-radius: 1rem;
    padding: 1.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
    background: rgba(255, 255, 255, 0.9);
  }

  .file-input-advanced-5:hover {
    border-color: #dc3545;
    box-shadow: 0 8px 32px rgba(220, 53, 69, 0.2);
  }

  .file-drop-zone-5 {
    text-align: center;
    padding: 2rem;
  }

  .file-icon-5 {
    font-size: 2.5rem;
    color: #dc3545;
    margin-bottom: 1rem;
  }

  .file-info-5 {
    margin-top: 1rem;
    padding: 1rem;
    background: rgba(220, 53, 69, 0.05);
    border-radius: 0.5rem;
    border: 1px solid rgba(220, 53, 69, 0.2);
    display: none;
  }

  .selected-file-5 {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    color: #dc3545;
    font-weight: 600;
  }

  /* Status messages */
  .status-message {
    margin-top: 1rem;
    padding: 0.75rem;
    border-radius: 0.5rem;
    font-weight: 500;
    display: none;
  }

  .status-success {
    background: rgba(40, 167, 69, 0.1);
    color: #28a745;
    border: 1px solid rgba(40, 167, 69, 0.3);
  }

  .status-error {
    background: rgba(220, 53, 69, 0.1);
    color: #dc3545;
    border: 1px solid rgba(220, 53, 69, 0.3);
  }

  /* Code section */
  .code-section {
    margin-top: 3rem;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 1rem;
    padding: 2rem;
    border: 1px solid rgba(220, 53, 69, 0.2);
  }

  .code-title {
    font-size: 1.5rem;
    color: #dc3545;
    margin-bottom: 1rem;
    font-weight: 600;
  }

  pre {
    background: #f8f9fa;
    border: 1px solid rgba(220, 53, 69, 0.2);
    border-radius: 0.5rem;
    padding: 1rem;
    overflow-x: auto;
    font-size: 0.9rem;
  }

  code {
    color: #495057;
  }
</style>
